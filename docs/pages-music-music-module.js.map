{"version":3,"sources":["webpack:///./src/app/pages/music/music-routing.module.ts","webpack:///./src/app/pages/music/music.component.html","webpack:///./src/app/pages/music/music.component.scss","webpack:///./src/app/pages/music/music.component.ts","webpack:///./src/app/pages/music/music.module.ts","webpack:///./src/app/pages/music/music.service.ts"],"names":[],"mappings":"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","file":"pages-music-music-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { MusicComponent } from './music.component';\n\nconst routes: Routes = [\n  {path: '', component: MusicComponent}\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class MusicRoutingModule { }\n","module.exports = \"<nz-card nzHoverable style=\\\"width:240px\\\" [nzCover]=\\\"coverTemplate\\\">\\n  <button nz-button nzType=\\\"default\\\" nzShape=\\\"circle\\\" (click)=\\\"playPreSong()\\\"><i class=\\\"anticon anticon-step-backward\\\"></i></button>\\n  <button nz-button nzType=\\\"default\\\" nzShape=\\\"circle\\\" nzSize=\\\"large\\\" style=\\\"margin-left:8px;margin-right:8px;\\\" (click)=\\\"playOrPause()\\\">\\n    <i class=\\\"anticon anticon-caret-right\\\" *ngIf=\\\"paused;else played\\\"></i>\\n    <ng-template #played>\\n      <i class=\\\"anticon anticon-pause\\\"></i>\\n    </ng-template>\\n  </button>\\n  <button nz-button nzType=\\\"default\\\" nzShape=\\\"circle\\\" (click)=\\\"playNextSong()\\\"><i class=\\\"anticon anticon-step-forward\\\"></i></button>\\n</nz-card>\\n<ng-template #coverTemplate>\\n  <!-- <img alt=\\\"example\\\" src=\\\"https://os.alipayobjects.com/rmsportal/QBnOOoLaAfKPirc.png\\\"/> -->\\n  <nz-upload class=\\\"avatar-uploader\\\"\\n    nzListType=\\\"picture-card\\\"\\n    [nzShowUploadList]=\\\"false\\\"\\n    [nzBeforeUpload]=\\\"beforeUpload\\\"\\n    (nzChange)=\\\"handleChange($event)\\\">\\n    <ng-container *ngIf=\\\"!avatarUrl\\\">\\n      <i class=\\\"anticon anticon-plus\\\"></i>\\n      <div class=\\\"ant-upload-text\\\">Upload</div>\\n    </ng-container>\\n    <img *ngIf=\\\"avatarUrl\\\" [src]=\\\"avatarUrl\\\" class=\\\"avatar\\\">\\n  </nz-upload>\\n</ng-template>\\n<audio #cxxmusic loop (ended)=\\\"ended()\\\">\\n  <source [src]=\\\"music.path\\\">\\n  <!--<source src=\\\"../../../assets/mp3/冯提莫 - 佛系少女.mp3\\\">-->\\n  Your browser does not support the audio element.\\n</audio>\\n\"","module.exports = \":host ::ng-deep .ant-card-body {\\n  background: #f0f2f5;\\n  height: 60px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center; }\\n\\n:host ::ng-deep .ant-upload.ant-upload-select-picture-card {\\n  /* border: 1px dashed #d9d9d9; */\\n  border-width: 0;\\n  width: 238px;\\n  height: 298px;\\n  /* border-radius: 4px; */\\n  border-radius: 0;\\n  background-color: #fafafa;\\n  transition: border-color 0.3s ease;\\n  margin: 0; }\\n\\n:host ::ng-deep .ant-upload.ant-upload-select-picture-card > .ant-upload {\\n    padding: 0; }\\n\\n:host ::ng-deep .ant-upload.ant-upload-select-picture-card > .ant-upload img {\\n      width: 238px;\\n      height: 298px;\\n      transition: -webkit-transform 1s;\\n      transition: transform 1s;\\n      transition: transform 1s, -webkit-transform 1s;\\n      -webkit-transform-origin: 50% 0;\\n              transform-origin: 50% 0; }\\n\\n:host ::ng-deep .ant-upload.ant-upload-select-picture-card > .ant-upload img:hover {\\n        -webkit-transform: scaleY(1.2);\\n                transform: scaleY(1.2);\\n        -webkit-transform-origin: 50% 0;\\n                transform-origin: 50% 0; }\\n\"","import { Component, OnInit, ViewChild, ElementRef, AfterViewInit, OnDestroy } from '@angular/core';\nimport { UploadFile, NzMessageService } from 'ng-zorro-antd';\nimport { Util, item } from 'cxx-lib';\nimport { Music } from './music.model';\nimport { Subscription } from 'rxjs';\nimport { MusicService } from './music.service';\n\n@Component({\n  selector: 'app-music',\n  templateUrl: './music.component.html',\n  styleUrls: ['./music.component.scss'],\n  animations: [item]\n})\nexport class MusicComponent implements OnInit, OnDestroy, AfterViewInit {\n  music: Music = {\n    name: '',\n    musicer: '',\n    path: ''\n  };\n  musicList: Music[] = [];\n  avatarUrl = 'https://os.alipayobjects.com/rmsportal/QBnOOoLaAfKPirc.png';\n  paused = true; // 是否暂停（默认为true）\n  @ViewChild('cxxmusic') cxxmusic: ElementRef;\n  private audio: any;\n  private pauseInterval: any;\n  private musicList$: Subscription;\n  constructor(private message: NzMessageService,\n    private musicService: MusicService) {\n    this.musicList$ = this.musicService.queryMusicList().subscribe((rsp: any) => {\n      this.musicList = rsp;\n      this.music = this.musicList[0];\n      console.log(this.music);\n    }, error => {\n    });\n  }\n\n  ngOnInit() {\n  }\n\n  ngOnDestroy() {\n    if (this.musicList$) {\n      this.musicList$.unsubscribe();\n    }\n  }\n\n  ngAfterViewInit() {\n    this.audio = this.cxxmusic.nativeElement;\n    this.audio.src = this.music.path;\n\n  }\n\n  playOrPause() {\n    this.paused = !this.paused;\n    if (!this.paused) {\n      this.play(this.audio);\n    } else {\n      this.pause(this.audio);\n    }\n  }\n\n  /**\n   *播放\n   *\n   * @param {*} audio\n   * @memberof MusicComponent\n   */\n  play(audio: any) {\n    if (this.pauseInterval) {\n      clearInterval(this.pauseInterval);\n    }\n    audio.volume = 1;\n    audio.play();\n  }\n\n  /**\n   *暂停\n   *\n   * @param {*} audio\n   * @memberof MusicComponent\n   */\n  pause(audio: any) {\n    let v = audio.volume;\n    this.pauseInterval = setInterval(() => {\n      v -= 0.2;\n      if (v > 0) {\n        audio.volume = v;\n      } else {\n        clearInterval(this.pauseInterval);\n        audio.pause();\n      }\n    }, 200);\n  }\n\n  /**\n   *上一首（无上一首就最后一首）\n   *\n   * @memberof MusicComponent\n   */\n  playPreSong() {\n    if (this.pauseInterval) {\n      clearInterval(this.pauseInterval);\n    }\n    const currentOrder = this.musicList.indexOf(this.music);\n    if (currentOrder > 0) {\n      this.music = this.musicList[currentOrder - 1];\n      this.audio.src = this.music.path;\n      if (!this.paused) {\n        this.audio.play();\n      }\n    } else {\n      this.music = this.musicList[this.musicList.length - 1];\n      this.audio.src = this.music.path;\n      if (!this.paused) {\n        this.audio.play();\n      }\n    }\n  }\n\n  /**\n   *下一首（无下一首就最后一首）\n   *\n   * @memberof MusicComponent\n   */\n  playNextSong() {\n    if (this.pauseInterval) {\n      clearInterval(this.pauseInterval);\n    }\n    const currentOrder = this.musicList.indexOf(this.music);\n    if (currentOrder < this.musicList.length - 1) {\n      this.music = this.musicList[currentOrder + 1];\n      this.audio.src = this.music.path;\n      if (!this.paused) {\n        this.audio.play();\n      }\n    } else {\n      this.music = this.musicList[0];\n      this.audio.pause();\n      this.audio.src = this.music.path;\n      if (!this.paused) {\n        this.audio.play();\n      }\n    }\n  }\n\n  beforeUpload = (file: File): boolean => {\n    if (!Util.fileCheck(this.message, file)) {\n      return false;\n    }\n    const uploadFile: UploadFile = Object.assign(file);\n    Util.getBase64(file, (img: string) => {\n      uploadFile.thumbUrl = img;\n      this.avatarUrl = img;\n    });\n    return false;\n  }\n\n  ended() {\n    console.log('----+++++');\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { MusicComponent } from './music.component';\nimport { SharedModule } from '../../shared/shared.module';\nimport { MusicRoutingModule } from './music-routing.module';\nimport { MusicService } from './music.service';\n\n@NgModule({\n  imports: [\n    SharedModule,\n    MusicRoutingModule\n  ],\n  declarations: [MusicComponent],\n  providers: [MusicService]\n})\nexport class MusicModule { }\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { map } from 'rxjs/operators';\n@Injectable()\nexport class MusicService {\n\n  constructor(private http: HttpClient) { }\n\n  /**\n   *查询音乐列表\n   *\n   * @memberof MusicService\n   */\n  queryMusicList() {\n    return this.http.post('http://localhost:8081/musicList', {}).pipe(\n      map(rsp => {\n        return rsp['rtnData'].musicList;\n      }));\n  }\n}\n"],"sourceRoot":""}